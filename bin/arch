#!/bin/sh

_version() {
	echo "$0 (coreutils-sh) devel"
	exit 0
}

_help() {
	echo "Usage: $0 [OPTION]..."
	echo "Print machine architecture."
	echo ""
	echo "      --help        display this help and exit"
	echo "      --version     output version information and exit"
	exit 0
}

_error() {
	>&2 echo "$*"
	>&2 echo "Try '$0 --help' for more information."
	exit 1
}

_get_arch() {
	read -r arch < /proc/sys/kernel/arch
	if [ -n "$arch" ]; then
		echo "$arch"
		exit 0
	fi
	exit 1
}

while :; do case "$1" in
	--)         shift; break;;
	--help)     _help;;
	--version)  _version;;
	-*)         _error "$0: invalid option -- '$1'";;
	*)          break;;
	esac
done

if [ -n "$1" ]; then
	_error "$0: extra operand '$1'"
fi

_get_arch
